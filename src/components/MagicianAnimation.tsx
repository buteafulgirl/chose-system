import React from 'react';

interface MagicianAnimationProps {
  isVisible: boolean;
}

export const MagicianAnimation: React.FC<MagicianAnimationProps> = ({ isVisible }) => {
  return (
    <div className={`fixed bottom-4 right-4 z-50 transition-all duration-500 ${
      isVisible ? 'w-[40vw] h-[40vh] max-w-[400px] max-h-[400px]' : 'w-48 h-56'
    }`}>
      <div className={`w-full h-full ${isVisible ? 'animate-bounce' : ''}`}>
        {isVisible ? (
          // Use GIF during drawing
          <img 
            src="/Mi動畫.gif" 
            alt="Magic Animation"
            className="w-full h-full object-contain drop-shadow-lg"
            onError={(e) => {
              // Fallback to SVG if GIF is not available
              const target = e.target as HTMLImageElement;
              target.style.display = 'none';
              const nextSibling = target.nextElementSibling as HTMLElement;
              if (nextSibling) {
                nextSibling.classList.remove('hidden');
              }
            }}
          />
        ) : null}
        
        {/* SVG Magician - shown when not drawing or as fallback */}
        <svg 
          xmlns="http://www.w3.org/2000/svg" 
          xmlnsXlink="http://www.w3.org/1999/xlink" 
          width="100%" 
          height="100%" 
          viewBox="0 0 175 203"
          className={`drop-shadow-lg ${isVisible ? 'hidden' : ''}`}
          preserveAspectRatio="xMidYMid meet"
        >
          <defs>
            <linearGradient id="a" x1="50%" x2="42.519%" y1="47.907%" y2="52.491%">
              <stop offset="0%" stopColor="#00499F"/>
              <stop offset="100%" stopColor="#002366"/>
            </linearGradient>
            <linearGradient id="b" x1="77.219%" x2="52.594%" y1="45.178%" y2="62.31%">
              <stop offset="0%" stopColor="#2F65CC"/>
              <stop offset="100%" stopColor="#00359B"/>
            </linearGradient>
            <linearGradient id="c" x1="41.24%" x2="139.319%" y1="-21.249%" y2="50%">
              <stop offset="0%" stopColor="#4F899C"/>
              <stop offset="100%" stopColor="#275163"/>
            </linearGradient>
            <linearGradient id="d" x1="6.998%" x2="84.132%" y1="0%" y2="77.108%">
              <stop offset="0%" stopColor="#95DFE1"/>
              <stop offset="100%" stopColor="#5CBCBF"/>
            </linearGradient>
            <linearGradient id="e" x1="51.303%" x2="41.232%" y1="39.808%" y2="85.125%">
              <stop offset="0%" stopColor="#2F65CC"/>
              <stop offset="100%" stopColor="#5C9EE8"/>
            </linearGradient>
            <linearGradient id="f" x1="51.578%" x2="50.913%" y1="3.387%" y2="94.479%">
              <stop offset="0%" stopColor="#5992FF"/>
              <stop offset="100%" stopColor="#6CABF1"/>
            </linearGradient>
            <linearGradient id="g" x1="45.554%" x2="58.482%" y1="30.723%" y2="105.858%">
              <stop offset="0%" stopColor="#2F65CC"/>
              <stop offset="100%" stopColor="#5C9EE8"/>
            </linearGradient>
            <linearGradient id="h" x1="49.594%" x2="48.801%" y1="4.551%" y2="97.844%">
              <stop offset="0%" stopColor="#5992FF"/>
              <stop offset="100%" stopColor="#6CABF1"/>
            </linearGradient>
            <linearGradient id="i" x1="47.352%" x2="76.995%" y1="-185.554%" y2="50%">
              <stop offset="0%" stopColor="#4F899C"/>
              <stop offset="100%" stopColor="#275163"/>
            </linearGradient>
            <linearGradient id="j" x1="41.24%" x2="139.319%" y1="-64.375%" y2="50%">
              <stop offset="0%" stopColor="#4F899C"/>
              <stop offset="100%" stopColor="#275163"/>
            </linearGradient>
            <linearGradient id="l" x1="12.055%" x2="170.503%" y1="30.478%" y2="112.367%">
              <stop offset="0%" stopColor="#FFF"/>
              <stop offset="100%" stopColor="#DDF6ED"/>
            </linearGradient>
            <linearGradient id="n" x1="41.24%" x2="139.319%" y1="-24.131%" y2="50%">
              <stop offset="0%" stopColor="#4F899C"/>
              <stop offset="100%" stopColor="#275163"/>
            </linearGradient>
            <linearGradient id="o" x1="41.35%" x2="138.2%" y1="-185.554%" y2="50%">
              <stop offset="0%" stopColor="#4F899C"/>
              <stop offset="100%" stopColor="#275163"/>
            </linearGradient>
            <linearGradient id="p" x1="71.688%" x2="42.919%" y1="42.579%" y2="62.257%">
              <stop offset="0%" stopColor="#2F65CC"/>
              <stop offset="100%" stopColor="#5C9EE8"/>
            </linearGradient>
            <linearGradient id="r" x1="75.11%" x2="47.728%" y1="58.251%" y2="50%">
              <stop offset="0%" stopColor="#1047B1"/>
              <stop offset="100%" stopColor="#2F65CC"/>
            </linearGradient>
            <linearGradient id="s" x1="50%" x2="50%" y1="-8.222%" y2="100%">
              <stop offset="0%" stopColor="#D7AA3B"/>
              <stop offset="100%" stopColor="#AF711B"/>
            </linearGradient>
            <radialGradient id="q" cx="58.964%" cy="31.896%" r="87.708%" fx="58.964%" fy="31.896%" gradientTransform="matrix(.31654 .6062 -.24127 .79531 .48 -.292)">
              <stop offset="0%" stopColor="#FFEC9F"/>
              <stop offset="100%" stopColor="#FFCC48"/>
            </radialGradient>
            <radialGradient id="t" cx="50%" cy="50%" r="50%" fx="50%" fy="50%">
              <stop offset="0%" stopColor="#FFCC48"/>
              <stop offset="100%" stopColor="#FFEC9F"/>
            </radialGradient>
            <filter id="u" width="80.3%" height="77%" x="9.9%" y="8.1%" filterUnits="objectBoundingBox">
              <feGaussianBlur in="SourceGraphic"/>
            </filter>
            <path id="k" d="M2.81828611,12.6000592 L0.288696198,25.6643732 C-1.34643847,34.1078673 4.13000692,42.2866431 12.5202614,43.9317099 L12.5202614,43.9317099 L52.4953606,51.7699436 C60.8856151,53.4150104 69.0128205,47.9042582 70.6475145,39.4607641 L70.6475145,39.4607641 L73.1771044,26.3964501 C74.8117985,17.9525126 69.3353531,9.77418025 60.9450986,8.12911339 L60.9450986,8.12911339 L20.97044,0.290436332 C19.9702364,0.0944472346 18.9748795,0 17.9931819,0 L17.9931819,0 C10.7361977,0.000886828494 4.25822685,5.16267208 2.81828611,12.6000592"/>
          </defs>
          <g fill="none" fillRule="evenodd">
            <path fill="url(#a)" d="M143.276067,84 C123.131572,84 124.830036,79.6917515 92.4734101,75.9524054 C60.1167837,72.2130592 33.0445712,58.6652716 40.2320811,57.0663362 C47.419591,55.4674009 84.1721221,47.5066337 118.081096,64.1229572 C151.990071,80.7392807 171.643863,76.1977922 174.092719,77.0269345 C176.541575,77.8560767 168.489672,78.9886093 165.059552,80.3739822 C159.074314,82.7913274 151.813153,84 143.276067,84 Z"/>
            <path fill="url(#b)" d="M109.491722,12.152232 C118.351763,5.27101533 142.41234,-10.3233837 148.100537,12.152232 C151.415874,25.2520335 155.343371,33.7664427 159.88303,37.6954597 L159.882851,37.6956656 C160.716575,38.4202185 160.805076,39.6834521 160.080524,40.5171768 C159.931917,40.6881741 159.755339,40.83268 159.558325,40.9445258 C156.900132,42.4546529 153.323944,42.8943581 148.829011,42.2623193 C139.871112,41.0027366 139.224319,32.6601179 124.580087,32.6601179 C109.935855,32.6601179 100.631681,19.0334488 109.491722,12.152232 Z"/>
            <path fill="url(#c)" d="M72.9515611,118.140797 L32.4373434,123.346306 C24.5683207,124.357527 22.2164098,134.65062 28.8610774,138.996967 L37.9076026,144.914897 C54.1919666,155.566639 76.118972,147.816008 82.145274,129.277979 L82.145274,129.277979 C84.0865619,123.305963 79.1635054,117.342814 72.9515611,118.140797"/>
            <path fill="url(#d)" d="M134.601992,144.559307 C136.811577,165.617632 123.623461,196.464991 102.627761,198.681167 C81.6316195,200.896899 60.7786873,173.64268 58.5695442,152.584355 C56.3599591,131.526029 72.2425402,118.88332 93.2382401,116.667145 C114.23394,114.451412 132.392407,123.500981 134.601992,144.559307"/>
            <g fill="#FFF" transform="translate(91.816 134.548)">
              <path d="M16.6041992,5.07601353 C16.674036,4.6606191 17.0678629,4.37955179 17.482022,4.44959696 C17.8961811,4.51964212 18.1764125,4.91464366 18.1065756,5.33003809 L17.5169404,8.83850288 L19.1267242,9.11026039 L19.7163594,5.60223892 C19.7861963,5.18684449 20.1800231,4.90577718 20.5937402,4.97582235 C21.0083413,5.04542419 21.2881307,5.44042572 21.2187359,5.85582015 L20.6291006,9.36428495 L22.2384424,9.63648578 L22.8280777,6.12802098 C23.0477544,4.8224323 22.1668375,3.58112557 20.8651315,3.36123695 C20.2693082,3.26060244 19.6876291,3.39138297 19.2102632,3.68752329 C18.8557749,3.25084932 18.3487946,2.93564608 17.7534133,2.83501157 C16.4512653,2.61512295 15.2140921,3.49822402 14.9944154,4.8038127 L14.4052222,8.3122775 L16.0145639,8.58447833 L16.6041992,5.07601353 Z"/>
              <polygon points="23.463 9.843 24.984 10.101 25.6 6.44 24.079 6.183"/>
              <path d="M25.6957205 4.42135723C25.8256701 4.59159358 25.8765007 4.79108931 25.8384882 5.01762778 25.8022438 5.23396981 25.6886484 5.40553614 25.5087522 5.53410005 25.328856 5.66222063 25.1299535 5.7136462 24.9142549 5.67729364 24.6883901 5.63916779 24.517334 5.52523357 24.3993186 5.34657407 24.2609709 5.16392465 24.2203064 4.96664554 24.2565508 4.75030351 24.2950053 4.52376504 24.3979925 4.35042542 24.5862869 4.23383125 24.757785 4.0932976 24.9549194 4.0525118 25.1807842 4.09063765 25.3964828 4.12699021 25.5693069 4.23028466 25.6957205 4.42135723M12.3540518 4.75571206C12.2143781 5.58650092 11.4267244 6.14863554 10.5984062 6.00854521 9.77008803 5.86845488 9.20962514 5.07889514 9.34929886 4.24766295L9.43239588 3.75291356 7.82305411 3.48115605 7.73951508 3.97590545C7.45044353 5.69688856 8.61114979 7.33319682 10.3274569 7.6231306 12.043322 7.91306439 13.674322 6.74889601 13.9638356 5.0279129L14.0469326 4.5331635 12.4371488 4.26096267 12.3540518 4.75571206ZM9.5393612 1.69039377C9.66931079 1.86063012 9.72014142 2.06012584 9.68212895 2.28666432 9.6458845 2.50300635 9.53228911 2.67457267 9.3523929 2.80313658 9.17249669 2.93125717 8.97359424 2.98268273 8.75789559 2.94633018 8.53203082 2.90820433 8.36097472 2.79427011 8.24295927 2.6156106 8.10461157 2.43296118 8.06394707 2.23568208 8.10019151 2.01934005 8.13864599 1.79280157 8.24163325 1.61946195 8.42992757 1.50286779 8.60142567 1.36233413 8.79856009 1.32154834 9.02442487 1.35967419 9.24012352 1.39602674 9.41294764 1.4993212 9.5393612 1.69039377M14.1505828 2.46984573C14.2805324 2.64008208 14.3313631 2.8395778 14.2933506 3.06611628 14.2571062 3.28245831 14.1435108 3.45402463 13.9636145 3.58258854 13.7837183 3.71070913 13.5848159 3.76213469 13.3691172 3.72578214 13.1432525 3.68765629 12.9721964 3.57372207 12.8541809 3.39506256 12.7158332 3.21241314 12.6751687 3.01513404 12.7114132 2.79879201 12.7498676 2.57225353 12.8528549 2.39891391 13.0411492 2.28231975 13.2126473 2.14178609 13.4097817 2.1010003 13.6356465 2.13912615 13.8513452 2.1754787 14.0241693 2.27877316 14.1505828 2.46984573M7.10391127 1.65448454 7.20513052 1.05200745 5.59534674.780249942 5.4941275 1.3822837C5.35445378 2.21307256 4.56724211 2.77520718 3.73892393 2.63511685 2.91016375 2.49502652 2.35014287 1.70546678 2.48937458.874677918L2.59059383.272200832.981252055 0 .880032812.602477086C.725772916 1.52104406.984346093 2.41522823 1.52005667 3.09351369.792515736 3.55856039.255479139 4.31841744.101219244 5.23698441L0 5.83901818 1.60978378 6.11121901 1.71100302 5.50874192C1.85067674 4.67795306 2.63788841 4.11581845 3.46620658 4.25590878 4.29496677 4.39599911 4.85498765 5.18600217 4.71575594 6.01679103L4.61453669 6.61926812 6.22387846 6.89102563 6.32509771 6.28899187C6.4793576 5.37042489 6.22078442 4.47624072 5.68507384 3.79751194 6.41261478 3.33290856 6.94965138 2.57305151 7.10391127 1.65448454"/>
            </g>
            <path fill="url(#e)" d="M123.794905,123.963571 C116.038162,118.718312 109.879189,119.638039 105.317988,126.72275 C98.4761859,137.349817 97.4097461,155.812373 101.510158,178.189309 C105.61057,200.566246 103.565012,199.325424 108.833968,202.329415 C112.346606,204.332075 121.844282,200.872436 137.326996,191.950498 C134.273379,170.574041 133.102606,154.806872 133.814676,144.648991 C134.526747,134.49111 131.186823,127.59597 123.794905,123.963571 Z"/>
            <path fill="url(#f)" d="M106.709054,137.349817 C111.907951,123.826437 121.19622,122.354109 119.966554,121.818222 C113.984335,119.211178 109.101479,120.846021 105.317988,126.72275 C98.4761859,137.349817 97.4097461,155.812373 101.510158,178.189309 C105.61057,200.566246 103.565012,199.325424 108.833968,202.329415 C109.671508,202.806921 110.849308,202.973886 112.367368,202.83031 C104.131434,178.189309 101.510158,150.873196 106.709054,137.349817 Z"/>
            <path fill="#2F65CC" d="M66.6252542,116.659969 C56.3717324,119.236912 48.5485015,120.525384 43.1555617,120.525384 C35.0661519,120.525384 35.2199169,163.637574 37.1425907,165.778114 C38.4243733,167.205141 45.8792282,162.795527 59.5071556,152.549273 L66.6252542,116.659969 Z"/>
            <path fill="url(#g)" d="M66.603079,116.04769 C58.5792467,134.282836 55.0266555,150.849101 55.9453052,165.746485 C57.3232798,188.09256 55,192.839388 55,192.839388 C55,192.839388 71.9865024,199.476285 77.7496857,197.203904 C83.5128689,194.931523 84.3305245,181.438411 84.3305245,165.746485 C84.3305245,150.054558 80.8091073,135.398945 81.4248662,120.32321 C81.5549493,117.13836 76.6143536,115.713187 66.603079,116.04769 Z"/>
            <path fill="url(#h)" d="M71.8422808,197.490405 C74.2133102,197.782952 76.3246134,197.7658 77.7496857,197.203904 C83.5128689,194.931523 84.4882437,180.982628 84.4882437,165.290702 C84.4882437,149.598775 80.9668264,134.943162 81.5825853,119.867426 C81.6620109,117.922836 79.8510774,116.634257 76.1497849,116.001689 C74.7711242,115.76607 77.4241647,140.220148 79.2569903,164.020712 C80.3449038,178.148055 77.2248532,193.566324 71.8422808,197.490405 Z"/>
            <path fill="#015EC7" d="M117.408695,163.401404 L149.942693,163.240769 C149.942693,167.727492 149.70328,170.89085 149.224454,172.730841 C146.175414,176.547974 140.883557,176.922276 133.699587,175.810464 C123.135881,174.175595 117.705583,170.039242 117.408695,163.401404 Z"/>
            <path fill="url(#i)" d="M122.64106,130.58104 L117.58054,172.379828 C116.59752,180.498417 126.228818,185.448571 132.22418,179.90658 L140.387578,172.361208 C155.081165,158.779983 152.919758,134.911428 136.026311,124.20693 L136.025869,124.20693 C130.58434,120.759201 123.41678,124.171908 122.64106,130.58104"/>
            <g transform="translate(43.156 46)">
              <path fill="url(#j)" d="M51.0658311,3.93006179 C54.3349033,1.18411398 58.623682,-0.303237473 63.1321374,0.0518649152 L65.7275932,0.460609487 C70.1277573,1.50862702 73.7557379,4.24349174 76.0276458,7.86190084 L79.6383881,8.43068532 C95.3282549,10.9022157 107.067477,23.123767 109.70625,37.9728988 L111.969317,38.3293311 C114.47151,38.723446 116.181187,41.0774956 115.788244,43.5867084 L113.542857,57.927791 C113.149914,60.4370039 110.802865,62.1517805 108.301114,61.7576656 L106.037604,61.4012333 C98.9880599,74.7244443 84.0787747,82.7486057 68.3889079,80.2775187 L36.2056086,75.2081106 C20.5157418,72.7365803 8.77651958,60.5150289 6.13818917,45.6658972 L3.87467936,45.3094648 C1.37292862,44.91535 -0.33674838,42.5613004 0.0561944474,40.0520875 L2.30158203,25.7110049 C2.69452486,23.201792 5.04113169,21.4870155 7.54332443,21.8811303 L9.80639223,22.2375627 C16.8559368,8.91435162 31.765222,0.890190279 47.4555308,3.36127731 Z"/>
              <g transform="translate(16.352 13.932)">
                <mask id="m" fill="#fff">
                  <use xlinkHref="#k"/>
                </mask>
                <path fill="url(#l)" d="M2.81828611,12.6000592 L0.288696198,25.6643732 C-1.34643847,34.1078673 4.13000692,42.2866431 12.5202614,43.9317099 L12.5202614,43.9317099 L52.4953606,51.7699436 C60.8856151,53.4150104 69.0128205,47.9042582 70.6475145,39.4607641 L70.6475145,39.4607641 L73.1771044,26.3964501 C74.8117985,17.9525126 69.3353531,9.77418025 60.9450986,8.12911339 L60.9450986,8.12911339 L20.97044,0.290436332 C19.9702364,0.0944472346 18.9748795,0 17.9931819,0 L17.9931819,0 C10.7361977,0.000886828494 4.25822685,5.16267208 2.81828611,12.6000592" mask="url(#m)"/>
              </g>
              <g transform="translate(31.18 24.074)">
                <path fill="url(#n)" d="M16.663072,24.8345707 C20.7541171,25.7083147 24.7779656,23.3464477 26.1117329,19.469765 L10.1944991,16.0699934 C9.84834738,20.1579941 12.5720268,23.9608268 16.663072,24.8345707"/>
                <path fill="url(#o)" d="M8.84167965 4.44879821C8.84167965 6.90586946 6.86246966 8.89759642 4.42083983 8.89759642 1.97920999 8.89759642 0 6.90586946 0 4.44879821 0 1.99172696 1.97920999 0 4.42083983 0 6.86246966 0 8.84167965 1.99172696 8.84167965 4.44879821M41.1138104 11.5668753C41.1138104 14.0239466 39.1346004 16.0156736 36.6929706 16.0156736 34.2513407 16.0156736 32.2721307 14.0239466 32.2721307 11.5668753 32.2721307 9.1098041 34.2513407 7.11807714 36.6929706 7.11807714 39.1346004 7.11807714 41.1138104 9.1098041 41.1138104 11.5668753"/>
              </g>
            </g>
            <path fill="url(#p)" d="M131.067147,0.966465401 C117.205668,3.55817938 99.1558966,17.517885 88.8842901,33.2856145 C82.0365524,43.7974342 65.7207739,51.7362072 39.9369545,57.1019334 C69.5273151,51.3086854 95.5753624,53.6490267 118.081096,64.1229572 C140.58683,74.5968877 159.303461,78.8028404 174.230987,76.7408152 C151.788959,69.6029171 139.480897,59.3052715 137.3068,45.8478785 C134.045655,25.6617889 137.430591,16.2207167 139.407917,11.0737545 C141.385244,5.92679219 144.928625,-1.62524858 131.067147,0.966465401 Z"/>
            <path stroke="#00499F" strokeLinecap="round" strokeLinejoin="round" d="M39.6089785,57.7725477 C69.4179898,51.5322235 95.5753624,53.6490267 118.081096,64.1229572 C140.58683,74.5968877 159.257371,78.9611539 174.092719,77.2157557"/>
            <path fill="url(#q)" d="M137.687321,47.6569766 C136.473544,47.1880734 131.75393,44.8755703 123.528479,40.7194673 C111.190302,34.4853126 89.4236484,32.6464638 86.8325026,36.0432499 C84.6541113,38.5789182 81.858531,40.9820704 78.4457618,43.2527064 C96.8387042,42.7788142 111.382069,45.4150742 122.075856,51.1614862 C138.116536,59.7811042 145.267289,60.953401 145.267289,60.953401 C145.267289,60.953401 143.440592,59.3219496 140.863639,54.9960142 C139.145671,52.1120572 138.086898,49.6657114 137.687321,47.6569766 Z"/>
            <path fill="url(#r)" d="M133.239929,122.923935 C142.825976,126.012949 149.180883,134.952472 152.304651,149.742502 C153.592829,155.841608 151.083046,166.946671 149.224454,172.730841 C147.024757,170.716713 142.057206,166.946671 136.410279,165.758365 C129.236091,164.24867 123.76475,163.806369 117.732878,165.758365 C116.633364,162.531522 117.980116,149.425363 121.773134,126.439888 C124.087259,126.055235 126.337083,125.500988 128.522604,124.777147 C130.708126,124.053306 132.280567,123.435568 133.239929,122.923935 Z"/>
            <g transform="rotate(-12 333.974 30.685)">
              <rect width="3" height="61" x="14" y="20" fill="url(#s)" rx="1.5"/>
              <rect width="6" height="11" x="12.5" y="20" fill="#BF883B" rx="1.5"/>
              <path fill="url(#t)" d="M14.5693177,23.7392886 L9.9762729,26.1539952 C8.99858372,26.6679968 7.78932941,26.2921038 7.2753278,25.3144146 C7.07064966,24.9250936 7.00002031,24.4791575 7.07437399,24.0456422 L7.9515675,18.9312116 C8.06284338,18.2824235 7.84774641,17.6204231 7.37637424,17.1609488 L3.6605229,13.5388889 C2.86955574,12.7678865 2.85337113,11.50166 3.62437355,10.7106928 C3.93139076,10.3957255 4.33367559,10.1907512 4.76894965,10.1275022 L9.9041299,9.38131679 C10.5555502,9.28665988 11.1186814,8.87752113 11.4100054,8.28723418 L13.7065278,3.6339715 C14.1953724,2.64346418 15.3946241,2.23678618 16.3851314,2.72563077 C16.7795566,2.92029125 17.0988117,3.23954629 17.2934722,3.6339715 L19.5899946,8.28723418 C19.8813186,8.87752113 20.4444498,9.28665988 21.0958701,9.38131679 L26.2310504,10.1275022 C27.3241401,10.2863374 28.081503,11.3012231 27.9226677,12.3943128 C27.8594187,12.8295869 27.6544444,13.2318717 27.3394771,13.5388889 L23.6236258,17.1609488 C23.1522536,17.6204231 22.9371566,18.2824235 23.0484325,18.9312116 L23.925626,24.0456422 C24.112348,25.1343151 23.3811724,26.168227 22.2924995,26.354949 C21.8589842,26.4293027 21.4130481,26.3586733 21.0237271,26.1539952 L16.4306823,23.7392886 C15.8480342,23.4329724 15.1519658,23.4329724 14.5693177,23.7392886 Z" filter="url(#u)"/>
            </g>
          </g>
        </svg>
      </div>
    </div>
  );
};